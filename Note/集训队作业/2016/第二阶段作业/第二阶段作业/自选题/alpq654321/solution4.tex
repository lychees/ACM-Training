\documentclass{noiassignment}

\begin{document}

%% 解题报告开始

\title{Bestcoder Round63 解题报告}
\author{浙江省余姚中学~~张浩威}

\maketitle

\section{摘要}

这是我在bestcoder上出的第四套题目，在这里分享一下出题的过程，试题可以在\uline{http://bestcoder.hdu.edu.cn/contests/contest\_show.php?cid=651}找到。

\section{1001}

\subsection{题目大意}

有一个长度为n的序列a，求存在多少对(i,j)($i<j$)，满足$|a_i-a_j|$ mod b=c。共有T组数据。

\subsection{数据范围}

$1\leq T \leq 5, 1\leq n \leq 100, 0\leq c < b \leq 10^9, 0\leq a_i \leq 10^9.$

\subsection{解析}

我们只需枚举所有点对，判断存在多少点对满足题目要求，计数就可以了。

时间复杂度为$O(n^2)$。

当然我们也可以将a数组排序，那么原始问题可以变为($a_j-a_i$) mod b=c，枚举所有j，在1至j-1中寻找符合条件的解，注意到这样的解对b取模后的值都是相同的，因此可以用map[i]来表示对b取模后值为i的数的个数，直接累加就可以了。

这样时间复杂度可以降为$O(nlog_2n)$。

本题旨在防止刚入门的选手出现0分的情况。

\section{1002}

\subsection{题目大意}

有一个长度为n的序列a，求存在多少长度为x的上升子序列。共有T组数据。

\subsection{数据范围}

$1\leq n \leq 100, 1\leq T \leq 5, 1\leq x \leq n.$

\subsection{解析}

有一个比较显然的dp，我们令dp[i][j]表示当前枚举到第i个数，且这个数在上升子序列的第j位。

那么有dp[i][j]=$\sum_{k=1}^{i-1}dp[k][j-1]$，其中需要满足的条件是$a_k<a_i$。

最终所有dp[i][x]的和就是答案了。

当然数据可能会存在100个从小到大按顺序的数，询问多少长度为50的上升子序列。这样答案就是100个数选50个的组合方案数了，答案可能非常大，需要用高精度处理。

时间复杂度为$O(n^2k*$高精的复杂度$)$。

本题不需要通过高精度就能通过pre，而最终大概有一半以上的选手FST或者被Hack，考察选手仔细程度与对数据的把握能力。

\section{1003}

\subsection{题目大意}

有一个n*m的矩阵，其中(n+m)为奇数，从(1,1)走到(n,m)且只能往下或者往右走。设经过的数为$a_1,a_2,$ 
$\cdots$
$,a_{2k-1},a_{2k}$，那么它对答案的贡献为$a_1*a_2+a_3*a_4+\cdots+a_{2k-1}*a_{2k}$。设计一条路径使得贡献最小。共有T组数据。

\subsection{数据范围}

$1 \leq T \leq 5, 1 \leq n,m \leq 1000.$

\subsection{解析}

注意到对答案的贡献中每一项只有两个未知数，且这两个未知数在矩阵中的位置是相邻的。

因此我们可以枚举下两步走到哪里。具体地，对于(i,j)这个位置，下两步有可能走到(i,j+2),(i+1,j+1),(i+2,j)，其中(i+1,j+1)的走法有两种，共4种。

我们枚举这4种走法，进行转移就可以了。

时间复杂度为$O(nm)$。

这是一道较简单的dp，在选手熟知的路径最短的基础上，加上了乘法的概念。只要选手熟悉dp，就能够做出这个题目。

\section{1004}

\subsection{题目大意}

有n个球，共有m种颜色，第i个球的颜色为j的概率为$\frac{a_{i,j}}{a_{i,1}+a_{i,2}+...+a_{i,m}}$。

对于第i种颜色，若有x个球，则对答案的贡献为$x^2$。

求答案的期望贡献和。共有T组数据。

\subsection{数据范围}

$1 \leq n,m \leq 1000, 1 \leq T \leq 5.$

\subsection{解析}

这是一道由NOI2009管道取珠改编而来的题目。

一个比较隐蔽的结论是，x个球对答案的贡献为$x^2$我们可以看作颜色相同的球的对数。

这样我们枚举任意两个球，再枚举每种颜色，求出它们颜色相同的期望，累加就是答案了。

但是这个做法时间复杂度是$O(n^2m)$的。我们需要进行优化。

优化的方法十分简单，对于每种颜色，我们不需要枚举每一对球，根据分配率和结合律，计算出所有球的概率之和的平方再减去每一个球的概率的平方和就可以了。

时间复杂度为$O(nm)$。

\section{1005}

\subsection{题目大意}

在一棵有n个点的带点权与边权的树中，对于任意点对(i,j)($i<j$)，对答案的贡献为$(a_i  xor  a_j)*dis(i,j)$，其中xor为异或，dis(i,j)为i到j的最短路。

求所有点对对答案的贡献和。

有Q个时刻，每个时刻会改变一个点的点权，求每次修改后的答案。共有T组数据。

\subsection{数据范围}

$1 \leq T \leq 5, 1 \leq n,Q \leq 30000, 0 \leq$ 点权 $< 16384, 0 \leq$ 边权 $\leq 100.$

\subsection{解析}

首先异或是可以将所有位分开来考虑的。

因此我们只要讨论边权$\leq$1的情况就可以了。

考虑修改i号点$a_i$的情况，答案需要减去所有点j(满足$a_j=a_i xor 1$)到点i的距离之和，加上所有点j(满足$a_j=a_i$)到点i的距离之和。

这是可以通过点分治来处理的。具体地，对于每一层点分治树上，记录根及其儿子为根的子树中0、1的数量和它们到根的距离之和。

每次更新时，设更新的点时x，根为y，z为x的祖先y的儿子，那么它对答案产生的贡献是：“y的子树中a值为$a_x xor 1$的数量*dis(x,y)”+"y的子树中a值为$a_x xor 1$的点到y的距离和"再减去z中对应的部分就是答案了。之后再在点分治树中更新维护的信息。

这样时间复杂度就是$O(nlog_2n*$位数$)$了。

\section{得分情况}

共565人通过1001,171人通过1002,377人通过1003,22人通过1004,0人通过1005。

\section{总结}

与上一套题相比，代码题的长度短了很多，思维题的难度也上升了。总体来看符合预期。

就这4套题目而言，每一套题都在汲取以前出题的经验，期待将来能出更好的题来回报社会。

\end{document}
