\documentclass{noiassignment}
\usepackage[bookmarks=false, colorlinks, linkcolor=black, anchorcolor=black, citecolor=black, urlcolor=black]{hyperref}

\begin{document}

%% 解题报告开始

\title{Outer space invaders 解题报告}
\author{宁波市镇海中学~~邹逍遥}

\maketitle

\section{试题来源}
CERC 2014 L

\url{http://codeforces.com/gym/100543/submit/L}

\section{试题大意}
有$n$个怪物，每个怪物会在$x_i$到$y_i$这段时间内待在离你$l_i$距离的地方。

你有一个炸弹，每次使用时可以确定一个$d$，将会消灭所有和你的距离不超过$d$的怪物，并花费$d$的代价。

求至少使用多少代价才能消灭所有的怪物。
\section{数据范围}
$n\leq 300,x_i,y_i,l_i\leq m,m=10000$
\section{算法介绍}
\subsection{算法一}
首先比较容易注意到，只有在一个怪物将要消失的时候才会使用炸弹。

那么在每个怪物消失的时候使用一个刚好能炸掉他的炸弹即可。
\subsection{算法二}
很可惜上面这个算法显然是错误的，连同更外面的怪物一起炸掉可能更优。

那么改成每次都炸全部会怎么样呢？容易看出这样一个很近的怪物就会触发所有炸弹。

既然直接贪心不够靠谱，尝试使用dp解决：$f_{i,S}$表示在第$i$个怪物消失时，当前剩下的怪物集合为$S$时的最优解。

观察一下可能出现的怪物集合，可以发现怪物集合的数量可能达到指数级别：只要怪物按距离从大到小加入，并且每加入一个怪物之后都加入一个距离比所有怪物都近的瞬间消失怪物，那么每个怪物都可以选择删或不删，就达到了指数级别。

也就是说这样dp的状态是指数级的，需要考虑其他的dp方式。
\subsection{算法三}
既然按顺序执行消灭不靠谱，不妨考虑从远到近考虑消灭。也就是说每次只考虑那些将当前时刻未消灭的所有怪物全都消灭了的操作。

那么一开始有$m$个位置可以选，选了一个位置$i$之后，所有包含位置$i$的区间都会被删除。

那么可以发现$i$左边的区间和右边的区间是没有交的。也就是说接下来只需要解决$1\sim i-1$和$i+1\sim m$这两个不相关的区间的子问题即可。

为了求出每个点的最大值，需要预先扫一遍所有包含在当前dp区间内的区间，求出每个点上最远的怪的位置。

那么总共$m^2$个状态，转移是$O(m)$的，总时间复杂度$O(m^3)$。

使用算法一中提到的那个性质将区间离散化可以做到$O(n^3)$。
\subsection{算法四}
上面这个算法写起来稍微有点麻烦，其实还可以加一个小优化降低一下码量。

注意到每个区间内最远的那个怪物一定是会被一个半径和它的$l_i$相同的操作消灭的，那么不优先选择消灭这个怪的答案肯定不会比先消灭这个怪的答案更优。

那么就可以不用确定每个时刻的最远距离，而是只枚举这个最远的怪物在哪个时刻被消灭然后dp即可。


%% 解题报告结束

\end{document}
