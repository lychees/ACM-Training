
\chapter{ACM/ICPC World Finals 1999~(8/8)}

\section{[A]Bee Breeding}
\subsection{题意简述}
\includegraphics[width=20em]{WF99A}

用上图方式生成地图并编号，求图中某两点的最短路。

【数据范围】询问点编号~$N\leq 10000$。
\subsection{算法分析}
正六边形坐标转为~$60^\circ$~角坐标系，按地图生成方式预处理编号对应的位置，直接推式子求距离。

【时间复杂度】$O(N)$，【空间复杂度】$O(N)$。

\section{[B]Bullet Hole}
\subsection{题意简述}
边长为~$d$~的立方体分为~$n^3$~块，每块内盛满水，用薄膜隔开。现有一子弹射来，经过的薄膜上会留下弹孔，问最后漏掉了多少水。

【数据范围】$n\leq 50$。
\subsection{算法分析}
每个小方块单独考虑，求其最靠下的弹孔。三维直线和平行于坐标轴的正方体面的交点。即 线面求交，判交点是否在正方形内部。（平行可不考虑，和其他面交时可以得到）

但在~$uva$~的数据中会出现子弹在内部或边界上的情况，因此还必须判断起点是否与面相交。此外，若子弹是往上打的，则需求出整个大正方体的边界和子弹轨迹的交的最小高度，低于这个高度的洞都不会造成漏水。

【时间复杂度】$O(n^3)$，【空间复杂度】$O(1)$。

\section{[C]A Dicey Problem}
\subsection{题意简述}
在~$n\times m$~的地图上标有数字，只有骰子底面和地图上数字相同或地图上是星星图案时才合法。

求把骰子从起点不回头地滚回到终点需要的最少步数。

【数据范围】$n,m\leq 10$。
\subsection{算法分析}
预处理骰子所有放置情况，模拟骰子的滚动，求出转动后对应的情况。

用位置和骰子的放置情况表示状态，~$bfs$~求最优解。

【时间复杂度】$O(n\times m\times 24\times 4)$，【空间复杂度】$O(n\times n\times 24)$。

\section{[D]The Fortified Forest}
\subsection{题意简述}
给出~$n$~棵树的位置、权值、高度。砍掉价值最小的树，使其长度能围住剩下的所有树。

【数据范围】$n\leq 15$。
\subsection{算法分析}
枚举每棵树是否砍掉，对剩余求凸包，判断是否可行，注意常数。

【时间复杂度】$O(2^n\times n\log n)$，【空间复杂度】$O(n)$。

\section{[E]Trade on Verweggistan}
\subsection{题意简述}
$n$个栈，每个中有$m_i$个数，每个栈中只能取一段前缀，最大化取的数的和。并输出前~$10$~小的可能的取的个数。

【数据范围】$n\leq 50,m\leq 20$。
\subsection{算法分析}
每个栈求前缀和，找最大值，和最大值一样的均可。背包或暴力维护前~$10$~小的个数。

【时间复杂度】$O(nm)$，【空间复杂度】$O(n+m)$。

\section{[F]Robot}
\subsection{题意简述}
起点在原点的~$n$~段机器臂连接，其中奇数段可以在~$xOz$~平面内旋转，偶数段在~$yOz$~平面内。给出每段的旋转角度，问是否有部分的纵坐标为负，或两机器臂相交（距离$<0.001$视为相交）。求最后一段终点的坐标。

【数据范围】$n\leq 10$。
\subsection{算法分析}
一段旋转会对后面的都产生影响，可以从后往前计算，然后分别平移旋转后面每个位置。或化成旋转矩阵，做矩阵乘法。

之后为三维线段求交，先判直线距离，然后判掉两线平行的情况，最后跨立实验。

【时间复杂度】$O(n^2)$，【空间复杂度】$O(n)$。

\section{[G]The Letter Carrier's Rounds}
\subsection{题意简述}
模拟SMTP会话。

命令：HELO myname

解释：发送发件MTA名字。

命令：MAIL FROM:<sender>

解释：发送发件者名字。

命令：RCPT TO:<user>

解释：给出一位收件者的名字。

命令：DATA

解释：标志正文的传送开始。接下来若干行为邮件正文，以开始第一个字符为句号的一行结束。

命令：QUIT

解释：结束会话。

接下来是收件MTA的返回码。

返回码：221

解释：关闭连接（在QUIT之后）。

返回码：250

解释：行为正常（MAIL FROM或RCPT TO命令所示名字存在，或邮件正文传输结束）。

返回码：354

解释：开始传送邮件（在DATA之后）

返回码：550

解释：行为异常或无此用户（RCPT TO命令之后为不存在用户）

【数据范围】名字为1到15个数字或字母。消息正文每行最多72个字符。总共最多~$n$~个MTA。总共最多~$n$~个用户。总共最多~$n$~条消息。消息正文总共最多~$n$~行。所有消息涉及的地址不超过~$n$~个。$n\leq 10^5$。
\subsection{算法分析}
按题意模拟即可。注意用户名字去重。用~$map$~来~$hash$~字符串可简化代码。

【时间复杂度】$O(n\log n)$，【空间复杂度】$O(n)$。

\section{[H]Flooded!}
\subsection{题意简述}
给出~$n\times m$~地图每格高度，每格大小为~$10m\times 10m$~，先该地区积水~$V~m^3$~（总是高度低的先有积水），求水面高度和积水区域百分比。

【数据范围】。
\subsection{算法分析}
从低到高添加区域，在当前基础上计算积水是否会漫到下一高度。注意判断时要加eps。

【时间复杂度】$O(nm)$，【空间复杂度】$O(nm)$。
