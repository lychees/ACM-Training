
\chapter{ACM/ICPC World Finals 2007~(10/10)}

\section{[A]Consanguine Calculations}
\subsection{题意简述}
给出父母和孩子三人中两人的血型，求第三人可能的血型。

【数据范围】血型为ABO血型系统和Rh血型系统。
\subsection{算法分析}
两种血型系统可分开判断，Rh血型直接特判，ABO血型枚举结合的两个基因，模拟血型结合过程。或直接手算打表。

【时间复杂度】$O(1)$，【空间复杂度】$O(1)$。

\section{[B]Containers}
\subsection{题意简述}
按顺序把~$n$~个字母分堆（新增字母放到任意一堆顶部），要求每堆从上到下不递增，最小化分的堆数。

【数据范围】$n\leq 1000$。
\subsection{算法分析}
贪心。每次从后往前，取最小的字母，然后从最靠前的该字母处继续扩展。

其实就是最长上升子序列的长度。

【时间复杂度】$O(n^2)$，【空间复杂度】$O(n)$。

\section{[C]Grand Prix}
\subsection{题意简述}
将斜面上的~$n$~条首尾相连的线段一起旋转，使每条线段的终点高度不低于起点。

最小化旋转的角度，或输出无解。

【数据范围】$n\leq 10000$。
\subsection{算法分析}
由于是往上的斜坡，则每条线段的终点~$x$~坐标都要不小于起点。（样例给出了角度$=0$的trick。）

点旋转的角度相当于线段倾斜角旋转的角度，可算出每条线可以接受的旋转角度，所有区间的交集为合法区间，变为区间覆盖问题，将区间排序后扫一遍。

【时间复杂度】$O(n\log n)$，【空间复杂度】$O(n)$。

\section{[D]Jacquard Circuits}
\subsection{题意简述}
给出一个~$n$~条边的格点多边形，将所有边缩小尽量大的倍数，使其仍为格点多边形。然后将该图形的边都变为~$1\sim m$~倍得到~$m$~个图形，求这~$m$~个图形的内部整点数的和。

【数据范围】$n\leq 1000,m\leq 10^6$。
\subsection{算法分析}
先将多边形收缩，即求所有边上点数的~$\gcd$~。然后求出该多边形的面积~$A$~和边上点数之和~$B=\sum{\gcd}$~。

然后运用皮克定理，$Area=Interior+\frac{Border}{2}-1$
\begin{eqnarray*}
    Interior&=&Area-\frac{Border}{2}+1                                                       \\
	        &=&\sum_{i=1}^{m}{i^2\times A-i\times \frac{B}{2}+1}                    \\
	        &=&\sum_{i=1}^{m}{i^2}~\times A-\sum_{i=1}^{m}{i}\times\frac{B}{2}+m    \\
	        &=&\frac{(2m+1)\times (m+1)\times m}{6}\times A-\frac{m\times (m-1)}{4}\times B+m
\end{eqnarray*}

注意读入多边形边上有多余点，需要去掉这些点。还有答案要使用~$unsigned~long~long$~来存。

【时间复杂度】$O(n)$，【空间复杂度】$O(n)$。

\section{[E]Collecting Luggage}
\subsection{题意简述}
给出~$n$~边形表示传送带，并给出传送带的速度、人的速度，行李在传送带上的初始位置、人的初始位置，求人拿到行李的最短时间。

保证人的速度大于传送带速度。(注意~uva11425 Collecting Luggage EXTREME!!!~上没有这个条件。)

【数据范围】$n\leq 100$。
\subsection{算法分析}

由于人的速度大于传送带，所以如果某个时刻已经拿到行李了，那么后面只要一直追行李，显然也是可以拿到的。所以拿到行李的时间是满足二分性质的。

二分时间，可以得到行李的位置和人可以走的长度。可~$floyd$~求出人到达每个顶点的距离，需要判断是否穿越了传送带（即进入内部，判断是否有不在线段端点上的交点，若没有则判断线段是否在多边形内部，以中点为判定点）。同样求出行李到每个点的距离，若人到行李距离$<Time\times V_\text{人}$，则可行。

【时间复杂度】$O(n^3+Case\times n^2)$，【空间复杂度】$O(n^2)$。

\section{[F]Marble Game}
\subsection{题意简述}
边长为~$n$~的面板上有若干小球和洞，以及若干挡板。每次可以使面板倾斜，小球受重力滚向一侧，直到遇到挡板或边界（遇到洞则填进去）。

求最少的操作次数使所有小球都进入对应编号的洞内。

【数据范围】$2\leq n\leq 4$。
\subsection{算法分析}
总状态数不多，用地图的hash值做下标，直接从起始状态广搜。搜索时模拟四种操作的影响，转移到新状态。

【时间复杂度】$O(\text{状态数})$，【空间复杂度】$O(\text{状态数})$。

\section{[G]Network}
\subsection{题意简述}
有~$n$~条消息被打包为~$m$~段传送，但每段到达的顺序不一定有序，需要一个缓冲区来重新排序（同一条消息的所有段需要按顺序连续通过缓冲区，可直接通过）。求最优的通过顺序，最小化缓冲区大小。

【数据范围】$n\leq 5,m\leq 1000$。
\subsection{算法分析}
可直接枚举信息通过的顺序。对于当前信息，记录已读取的量，模拟缓冲区。

【时间复杂度】$O(2^n\times m)$，【空间复杂度】$O(m)$。

\section{[H]Raising the Roof}
\subsection{题意简述}
空间中有~$n$~个点，组成不相交的~$V$~个三角形。求俯视可见部分的表面积之和。

【数据范围】$n\leq 300,V\leq 1000$。
\subsection{算法分析}
把所有边投影到平面，求出所有交点建平面图，对平面图每个域，该域最上方的面属于同一个三角形，求出该域对应的最上方三角形，通过倾斜角算出对应面积
（~$\text{原面积}\times \frac{1}{\cos{\theta}}$~）。

【时间复杂度】$O(V^3)$，【空间复杂度】$O(V^2)$。

\section{[I]Problem: Water Tanks}
\subsection{题意简述}
有~$n$~个不同高度的水箱，相邻两个之间用高度递增的管道连接。

第一个水箱开口，从第一个水箱开始往内灌水，问最后灌进去的水的体积。

物理知识：封闭空间中气压处处相同，且气压~$\times$~体积为定值。在一个空气层下的水体，在水面以下D米的水压等于在表面气压加上~$0.097\times D$~个大气压。连通水体中同一高度水压相同。

【数据范围】$n\leq 10$。
\subsection{算法分析}
第一个和第二个的连接处以下部分显然倒满。之后每个水箱依次考虑。

当前水箱会有三种状态（该水箱与上一个连接处以下部分水已满，由于连接点递增，前面部分水连通）：

\begin{enumerate}
  \item 无法到达该水箱与下一个的连接处（判断水达到该高度时的表面水压，和第一个水箱得到的水压比较）：那么设高度为~$x$~，解一元二次方程。
  \item 到达下一个连接处，但下一个水箱的高度无法到达连接处的高度（判断方法类似上一个）：该水箱连接处高度的气压为已知值，根据这个计算得到下一个水箱水面高度。
  \item 下一个水箱继续做，当前水箱超过连接处部分已封闭，设高度为~$x$~，解一元二次方程。
\end{enumerate}

【时间复杂度】$O(n)$，【空间复杂度】$O(n)$。

\section{[J]Tunnels}
\subsection{题意简述}
在~$n$~个点~$m$~条边的图中，要防止一个人从~$1$~号点到达~$0$~号点。你可以实时知道他的位置，并在任意时间摧毁图中任意的边。求需要摧毁的最小边数。

【数据范围】$n\leq 50,m\leq 1000$。
\subsection{算法分析}
每点作为源点做最小割，得到每点权值，权值从小到大枚举每点，用阻止他到该点的费用（最小割）~$+$~这点删掉后的最小割（两部分没有交集）来更新原先的每个点的权值。

【时间复杂度】$O(n\times Maxflow(n,m))$，【空间复杂度】$O(n^2+m)$。
