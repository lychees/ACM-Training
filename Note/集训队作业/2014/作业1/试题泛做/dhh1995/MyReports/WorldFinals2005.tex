
\chapter{ACM/ICPC World Finals 2005~(10/10)}

\section{[A]Eyeball Benders}
\subsection{题意简述}
确定第一张图(~$n$~条线段)是不是第二张图(~$m$~条线段)的某个部分的放大图。所有的线段都被认为是无宽度的。

在第一张图中某条线段的端点在放大前一定是第二张图中某条线段的端点。未放大线段必须距离放大框至少0.005，线段长度至少为0.005。

【数据范围】~$n,m\leq 50$~。
\subsection{算法分析}
肯定有匹配的端点，则枚举匹配的端点，这样就确定了平移量。然后分两种情况考虑：若第一幅图中关键点在所有线段上，那比例无法确定，但放大比例越大，越容易满足条件，所以直接把放大前长度定为0.005。否则其他线段肯定存在对应线段，枚举某条确定的线段的对应线段，求出比例，然后按比例缩小第一幅图，求出放大框，然后判断是否第一幅图内线段都在第二幅图的放大框内，以及第二幅图的放大框内(包括距离0.005以内的)的所有线段都在第一幅图内。若两者均成立则可行。

【时间复杂度】$O(nm^2(n+m))$，【空间复杂度】$O(n+m)$。

\section{[B]Simplified GSM Network}
\subsection{题意简述}
$B$~座塔，平面中的每个点归最近的塔覆盖。有~$C$~座城市，由~$R$~条道路连接。有~$Q$~次旅行，求每次旅行从起点到终点的最少的切换覆盖塔的次数。

【数据范围】$B,C\leq 50~,~R\leq 250~,~Q\leq 10$~,~城市不在覆盖区域的边界上。
\subsection{算法分析}
对于每条道路单独计算穿越次数，作为边权。

穿越次数$=$覆盖塔数$-1$。枚举一座塔，枚举另一座以不断缩小其区域（只需维护该区域在所求线段上的部分，即一个区间）。若最后仍存在区间，则覆盖到了这条边。

最后~$floyd$~得到两点间最短路即可。

【时间复杂度】$O(R\times B^2+C^3)$，【空间复杂度】$O(C^2)$。

\section{[C]The Traveling Judges Problem}
\subsection{题意简述}
$n$~个点~$m$~条边的图中，$c$~个人要去同一个点，多个人经过同一条边只计算一次费用。求最小费用和方案。

最小费用相同时取所有人经过的点集大小最小的方案，也一样时取点集字典序最小的，再次一样时输出任意解。

【数据范围】$n\leq 20~,~c\leq 10$。
\subsection{算法分析}
同一条边费用只算一次即最小生成树。

由于~$n$~较小，可直接枚举中转点集合，然后直接做最小生成树~$(prim)$~即可。

由于中转点数量不会达到~$n$，所以能通过数据。

【时间复杂度】$O(2^{n-c}\times n^2)$，【空间复杂度】$O(n^2)$。
\section{[D]cNteSahruPfefrlefe(Near Perfect Shuffle)}
\subsection{题意简述}
初始为~$[0,51]$~的排列，每次操作会取出前~$26$~个数和后~$26$~个数，交错地重新组合（最靠前的是原第~$26$~个数），但最多会有一处错误，交换了相邻两项。

给出最终的排列，问最少进行了几次操作，输出错误所在处。有多个答案时，错误数量少的优先，错误数量一样的按错误的位置组成的数组的字典序小的优先。

【数据范围】$answer\leq 10$。
\subsection{算法分析}
操作次数不同，排列相差很大，直接枚举操作次数，用两数组的差异（可以两两任意交换下的最少的交换次数）当作所需的最少错误次数来估计。

然后搜索，中途用差异估价并剪枝。

【时间复杂度】$O(n^{answer})$，【空间复杂度】$O(n)$。
\section{[E]Lots of Sunlight}
\subsection{题意简述}
给出日出和日落时间和楼房数~$n$~，各楼房层数~$m_i$~、房间高度和宽度、楼房间隔，分别求~$Q$~间房间能被太阳照到的时间段。（只有整段墙都被照到或太阳在楼顶时才算照到。）

【数据范围】$0\leq n<100~,~0\leq m_i<100~,~Q\leq 1000~,~d_i,w,h\leq 100$。
\subsection{算法分析}
对于每个询问，枚举两侧楼房，用最高的楼层计算挡住的时间（算夹角，用日出日落时间转了~$180^\circ$~换算成时间），注意不存在该房间的特判。

【时间复杂度】$O(Q\times n)$，【空间复杂度】$O(n)$。

\section{[F]Crossing Streets}
\subsection{题意简述}
给出平面上~$n$~条与坐标轴垂直的线段，求一个人从起点到终点至少穿过多少条线段（穿过两条重合的线段只算作一条）。他可以任意走，但不能穿过两条垂直的线段的相交处。

【数据范围】$n\leq 500$~，给出坐标为整数且在~$2\times 10^9$~范围内。
\subsection{算法分析}
所有线段会把平面分为若干连通块，相邻连通块之间的距离设为~$1$~。则起点所在连通块到终点所在连通块的最短路即为答案。

又由于此题~$n$~范围较小，直接离散出所有坐标。且因为边权都是~$0$~或~$1$~，直接从起点开始~$bfs$~，用双端队列维护。

【时间复杂度】$O(n^2)$，【空间复杂度】$O(n^2)$。

\section{[G]Tiling the Plane}
\subsection{题意简述}
给出一个所有边都和坐标轴平行的~$n$~边形，问其是否可以铺满平面。

一个多边形当且仅当满足以下两个条件中至少一个时可以铺满平面：
\begin{enumerate}[itemindent=1em]
  \item 在多边形边界上顺次存在四个点A,B,C,D（不一定要是多边形的顶点），使得A到B的边界与D到C的边界重合，B到C的边界与A到D的边界重合。这表明这个多边形可以用棋盘覆盖的方式铺满平面。
  \item 在多边形边界上顺次存在六个点A,B,C,D,E,F（不一定要是多边形的顶点），使得A到B的边界与E到D的边界重合，B到C的边界与F到E的边界重合，C到D的边界与A到F的边界重合。这表明这个多边形可以用蜂巢覆盖的方式铺满平面。
\end{enumerate}

【数据范围】$n\leq 50$。
\subsection{算法分析}
可以发现肯定有一个顶点被选为分割点，则先枚举一个分割点，把边的序列分为两部分，并将一段的边反向且翻转。这样问题就变为能否将序列划分为~$2$~或~$3$~段，使其逆序相等，即AB~BA或ABC~CBA的形式。

而对于每一段，可以发现其中（包括两侧）至少有一个顶点。则先枚举第二段中和第一段的A中第一个顶点匹配的顶点，然后尽量长地往前后扩展，若能扩展到第一段头，第二段尾，则这个A合法。
然后问题变为划分为两段，继续这样做下去，直到划完序列或用完~$3$~段为止。

但这样做是有漏洞了，如果A只有最左侧有顶点，则上述算法枚举不到这种情况，但可以证明这时BC两段的左侧或内部均有顶点，所以翻转整个序列后再进行一次就可以找到了。

【时间复杂度】$O(n^4)$，【空间复杂度】$O(n)$。

\section{[H]The Great Wall Game}
\subsection{题意简述}
$n\times n$~棋盘上有~$n$~个棋子，坐标分别为~$(x_i,y_i)$~，一个棋子向四个方向之一移动一格算作一步，求所有棋子排成一行或一列或一对角线所需的最少步数。

【数据范围】。
\subsection{算法分析}
排成一行或一列可以贪心，下面只讨论移到一行的情况，一列的情况类似。

把~$x$~方向和~$y$~方向的步数分离，发现~$x$~方向为和同一数求~$abs$~，所以取中位数最优；而~$y$~方向为~$y_i$~和~$i$~配对，因为配对不交叉，所以最左侧的和第一列配，次左的和第二列配，依次类推，所以排序后直接计算即可。

而排成对角线只能最优匹配，用最小费用流或~$KM$~计算。

【时间复杂度】$O(n+n^3)$，【空间复杂度】$O(n^2)$。

\section{[I]Workshops}
\subsection{题意简述}
有~$n$~个会议，每个需要~$t_i$~时间，有~$p_i$~的人参与。有~$m$~个房间，每个可用事件为~$t_j$~,可以容纳~$p_j$~个人。给会议安排房间，使可以开会的人最多。

【数据范围】$n,m\leq 1000$。
\subsection{算法分析}
若一个房间~$j$~可以容纳会议~$i$~，则~$j$~和~$i$~可以匹配，价值为人数，直接费用流或~$KM$~求最优匹配，可能可以卡过。

但此题可以贪心，两者都按时间~$t$~排序，对于当前的房间在时间允许下显然选人数满足情况下人数最多的会议，用~$multiset$~维护即可。

【时间复杂度】$O((n+m)\log{m}+n\log{n})$，【空间复杂度】$O(n+m)$。

\section{[J]Zones}
\subsection{题意简述}
给出~$n$~个每个塔的覆盖人数和~$m$~个公共覆盖区的人数和涉及的塔。要求只能建造其中~$s$~座塔，求最多能覆盖的人数。

【数据范围】$n\leq 20~,~m\leq 10$。
\subsection{算法分析}
先把公共覆盖区的人数从塔的覆盖人数中减去，然后搜索选取的集合，记录塔能覆盖的人数，然后枚举每个公共覆盖区，若该区域内存在选取的塔（用二进制优化判断），则累加人数，取最优解即可。

【时间复杂度】$O(2^n\times m)$，【空间复杂度】$O(n+m)$。
