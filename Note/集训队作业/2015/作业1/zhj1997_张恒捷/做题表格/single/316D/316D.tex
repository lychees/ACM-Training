\section{316D PE lesson}
\subsection*{试题大意}
n个人，每个人拿了一个球，球互不相同。每次可以选两个人交换他们手中的球。每个人的交换次数不能超过2次。问最终人手中的球有几种可能的排列。

$n\leq~10^6$
\subsection*{算法}
考虑最终的排列，每个人向自己手里的球的初始拥有者连一条边，会连出一些环。如果这个环中交换1次的人不超过2个，则这个环是可以交换出来的。

假设交换1次的有n个，交换2次的有m个。

可以先用dp算出n个交换1次的分配到若干环中的方案数，剩下的能交换2次的，每个人都能跟到前面任意一个人的后面。答案就是：

$f[i]=f[i-1]+f[i-2]*(i-1)$

$answer=f[n]\times \frac{(n+m)!}{n!}$
\subsection*{时间复杂度：$O(n)$，空间复杂度：$O(1)$}
